"use strict";(self.webpackChunkvue_admin_better=self.webpackChunkvue_admin_better||[]).push([["7461"],{43519:function(e,t,n){var o=n(26741),r=n.n(o),l=n(63494),i=n.n(l)()(r());i.push([e.id,".form-container[data-v-848bd2b4]{padding:20px;display:flex;flex-direction:column;height:100%;overflow:hidden}.form-container .form-card[data-v-848bd2b4]{flex:1;display:flex;flex-direction:column;overflow:hidden}.card-header[data-v-848bd2b4]{display:flex;justify-content:space-between;align-items:center;font-weight:bold}.designer-viewport[data-v-848bd2b4]{min-height:420px;overflow:hidden;background:#fff;border-radius:8px;border:1px solid #ebeef5;position:relative;display:grid;place-content:start center}.designer-scale[data-v-848bd2b4]{width:100%;height:100%;will-change:transform}.designer-root[data-v-848bd2b4]{width:100%;height:100%;min-height:0;display:block}",""]),t.A=i},70148:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var o=n(65611),r=n(67312);let l={class:"form-container"},i={class:"card-header"},d={class:"header-actions"};var a=n(66270),s=n.n(a),c=n(38007),f=n.n(c),u=n(92669),v=n.n(u),m=n(23566),b=n.n(m),g=n(76106),h=n.n(g),p=n(12527),w=n.n(p),y=n(43519),k={};k.styleTagTransform=w(),k.setAttributes=b(),k.insert=v().bind(null,"head"),k.domAPI=f(),k.insertStyleElement=h(),s()(y.A,k),y.A&&y.A.locals&&y.A.locals;var _=(0,n(4786).default)({__name:"form",setup(e){let t,n=(0,o.KR)(null),a=(0,o.KR)(null),s={html:"",body:""},c=(0,o.KR)(.9),f=(0,o.EW)(()=>({transform:`scale(${c.value})`,transformOrigin:"top center"}));function u(){let e=a.value;if(!e)return;let t=e.getBoundingClientRect(),n=document.querySelector(".app-footer, .layout-footer, .vab-footer, footer, #footer"),o=n?n.getBoundingClientRect().height:56,r=Math.max(420,window.innerHeight-t.top-o-12);e.style.height=r+"px"}function v(){u()}function m(){let e=n.value?.getRule?.()||[],t=n.value?.getOption?.()||{};localStorage.setItem("formTpl",JSON.stringify({rule:e,option:t})),console.log("[formTpl saved]",{rule:e,option:t}),r.n.success("已保存到 localStorage（接后端即可）")}function b(){let e=n.value?.getRule?.()||[],t=n.value?.getOption?.()||{};sessionStorage.setItem("formPreview",JSON.stringify({rule:e,option:t})),window.open("/preview","_blank")}return(0,o.sV)(async()=>{let e,n;await new Promise(e=>requestAnimationFrame(e)),await (0,o.dY)(),e=document.documentElement,n=document.body,s.html=e.style.overflow,s.body=n.style.overflow,e.style.overflow="hidden",n.style.overflow="hidden",u();let r=document.querySelector(".form-card .el-card__body");r&&(r.style.overflow="hidden"),window.addEventListener("resize",v,{passive:!0});let l=document.getElementById("vue-admin-better");window.ResizeObserver&&l&&(t=new ResizeObserver(()=>u())).observe(l)}),(0,o.xo)(()=>{let e,n;window.removeEventListener("resize",v),t&&t.disconnect(),e=document.documentElement,n=document.body,e.style.overflow=s.html,n.style.overflow=s.body}),(e,t)=>{let r=(0,o.g2)("el-button"),s=(0,o.g2)("fc-designer"),c=(0,o.g2)("el-card");return(0,o.uX)(),(0,o.CE)("div",l,[(0,o.bF)(c,{shadow:"never",class:"form-card"},{header:(0,o.k6)(()=>[(0,o.Lk)("div",i,[t[2]||(t[2]=(0,o.Lk)("span",null,"自定义表单设计",-1)),(0,o.Lk)("div",d,[(0,o.bF)(r,{type:"primary",onClick:m},{default:(0,o.k6)(()=>[...t[0]||(t[0]=[(0,o.eW)("保存表单",-1)])]),_:1}),(0,o.bF)(r,{onClick:b},{default:(0,o.k6)(()=>[...t[1]||(t[1]=[(0,o.eW)("预览",-1)])]),_:1})])])]),default:(0,o.k6)(()=>[(0,o.Lk)("div",{ref_key:"viewportRef",ref:a,class:"designer-viewport"},[(0,o.Lk)("div",{class:"designer-scale",style:(0,o.Tr)(f.value)},[(0,o.bF)(s,{ref_key:"designerRef",ref:n,class:"designer-root"},null,512)],4)],512)]),_:1})])}}},[["__scopeId","data-v-848bd2b4"]])}}]);