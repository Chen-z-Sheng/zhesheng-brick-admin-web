"use strict";(self.webpackChunkvue_admin_better=self.webpackChunkvue_admin_better||[]).push([["1048"],{46729:function(e,n,t){async function a(e,{method:n="GET",body:t}={}){let r=await fetch(`/api${e}`,{method:n,headers:t?{"Content-Type":"application/json"}:void 0,body:t?JSON.stringify(t):void 0,credentials:"include"});if(!r.ok){let e=await r.text().catch(()=>"");throw Error(`HTTP ${r.status}: ${e||r.statusText}`)}return 204===r.status?null:r.json()}function r(e={}){let n=new URLSearchParams(e).toString();return a(`/templates${n?`?${n}`:""}`)}function l(e){return a(`/templates/${e}`)}function i(e){return a("/templates",{method:"POST",body:e})}function d(e,n){return a(`/templates/${e}`,{method:"PUT",body:n})}function o(e){return a(`/templates/${e}`,{method:"DELETE"})}function s(e){return a(`/templates/${e}/duplicate`,{method:"POST"})}function c(e,n={}){let t=new URLSearchParams(n).toString();return a(`/templates/${e}/render${t?`?${t}`:""}`)}t.r(n),t.d(n,{createTemplate:function(){return i},deleteTemplate:function(){return o},duplicateTemplate:function(){return s},getTemplateDetail:function(){return l},getTemplateRender:function(){return c},getTemplates:function(){return r},updateTemplate:function(){return d}})},18417:function(e,n,t){var a=t(26741),r=t.n(a),l=t(63494),i=t.n(l)()(r());i.push([e.id,"\n/* 布局样式：确保页面美观且响应式 */\n.template-list[data-v-1dd1c375] {\n  padding: 20px;\n  background-color: #fff;\n  min-height: calc(100vh - 120px);\n}\n.toolbar[data-v-1dd1c375] {\n  display: flex;\n  align-items: center;\n  margin-bottom: 24px;\n  gap: 16px;\n}\n.grow[data-v-1dd1c375] {\n  flex: 1; /* 自动填充剩余空间，实现按钮右对齐 */\n}\n.grid[data-v-1dd1c375] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); /* 响应式卡片布局 */\n  gap: 24px;\n}\n.card[data-v-1dd1c375] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  transition: transform 0.2s ease;\n}\n.card[data-v-1dd1c375]:hover {\n  transform: translateY(-4px); /* hover轻微上浮，提升交互体验 */\n}\n.card-hd[data-v-1dd1c375] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n.name[data-v-1dd1c375] {\n  font-size: 16px;\n  font-weight: 600;\n  color: #1989fa; /* 主色调，与Element Plus一致 */\n}\n.team[data-v-1dd1c375] {\n  font-size: 12px;\n  color: #666;\n  background-color: #f0f2f5;\n  padding: 2px 10px;\n  border-radius: 16px;\n}\n.desc[data-v-1dd1c375] {\n  margin: 16px 0;\n  color: #666;\n  flex: 1; /* 让描述区占满中间空间，按钮区靠底 */\n  line-height: 1.6;\n  font-size: 14px;\n}\n.ops[data-v-1dd1c375] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n  margin-top: 12px;\n}\n",""]),n.A=i},9419:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var a=t(65611),r=t(10365),l=t(67312),i=t(46729);let d={class:"template-list"},o={class:"toolbar"},s={key:1,class:"grid"},c={class:"card-hd"},u={class:"name"},p={class:"team"},m={class:"desc"},f={class:"ops"};var v=t(66270),g=t.n(v),h=t(38007),y=t.n(h),k=t(92669),x=t.n(k),b=t(23566),w=t.n(b),T=t(76106),_=t.n(T),C=t(12527),L=t.n(C),$=t(18417),E={};E.styleTagTransform=L(),E.setAttributes=w(),E.insert=x().bind(null,"head"),E.domAPI=y(),E.insertStyleElement=_(),g()($.A,E),$.A&&$.A.locals&&$.A.locals;var S=(0,t(4786).default)({__name:"form",setup(e){let n=(0,r.rd)(),t=(0,a.KR)(""),v=(0,a.KR)([]);async function g(){try{v.value=await (0,i.getTemplates)()}catch(e){l.n.error("加载模板失败："+(e.message||"服务器异常")),v.value=[]}}(0,a.sV)(g);let h=(0,a.EW)(()=>{let e=t.value.trim().toLowerCase();return e?v.value.filter(n=>[n.name,n.teamName,n.description].some(n=>n?.toLowerCase().includes(e))):v.value});function y(){n.push({path:"/form",query:{mode:"new"}})}async function k(e){try{await (0,i.deleteTemplate)(e),l.n.success("删除成功！"),g()}catch(e){l.n.error("删除失败："+(e.message||"操作异常"))}}return(e,r)=>{let l=(0,a.g2)("el-input"),i=(0,a.g2)("el-button"),v=(0,a.g2)("el-empty"),g=(0,a.g2)("el-popconfirm"),x=(0,a.g2)("el-card");return(0,a.uX)(),(0,a.CE)("div",d,[(0,a.Lk)("div",o,[(0,a.bF)(l,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=e=>t.value=e),placeholder:"搜索模板名称或团队名称",clearable:"",class:"w-64"},null,8,["modelValue"]),r[2]||(r[2]=(0,a.Lk)("div",{class:"grow"},null,-1)),(0,a.bF)(i,{type:"primary",onClick:y},{default:(0,a.k6)(()=>[...r[1]||(r[1]=[(0,a.eW)("新建模板",-1)])]),_:1})]),0===h.value.length?((0,a.uX)(),(0,a.Wv)(v,{key:0,description:"暂无模板"},{extra:(0,a.k6)(()=>[(0,a.bF)(i,{type:"primary",onClick:y},{default:(0,a.k6)(()=>[...r[3]||(r[3]=[(0,a.eW)("去新建",-1)])]),_:1})]),_:1})):((0,a.uX)(),(0,a.CE)("div",s,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(h.value,e=>((0,a.uX)(),(0,a.Wv)(x,{key:e.id,class:"card",shadow:"hover"},{header:(0,a.k6)(()=>[(0,a.Lk)("div",c,[(0,a.Lk)("b",u,(0,a.v_)(e.name),1),(0,a.Lk)("span",p,(0,a.v_)(e.teamName),1)])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",m,(0,a.v_)(e.description||"无描述"),1),(0,a.Lk)("div",f,[(0,a.bF)(i,{size:"small",type:"primary",onClick:t=>{var a;return a=e.id,void n.push({path:"/form",query:{id:String(a)}})}},{default:(0,a.k6)(()=>[...r[4]||(r[4]=[(0,a.eW)("编辑",-1)])]),_:1},8,["onClick"]),(0,a.bF)(i,{size:"small",onClick:t=>{var a;return a=e.id,void n.push({path:"/form",query:{id:String(a),preview:"true"}})}},{default:(0,a.k6)(()=>[...r[5]||(r[5]=[(0,a.eW)("预览",-1)])]),_:1},8,["onClick"]),(0,a.bF)(g,{title:"确认删除此模板？",onConfirm:n=>k(e.id)},{reference:(0,a.k6)(()=>[(0,a.bF)(i,{size:"small",type:"danger"},{default:(0,a.k6)(()=>[...r[6]||(r[6]=[(0,a.eW)("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])])]),_:2},1024))),128))]))])}}},[["__scopeId","data-v-1dd1c375"]])}}]);