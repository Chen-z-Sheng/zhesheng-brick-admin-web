"use strict";(self.webpackChunkvue_admin_better=self.webpackChunkvue_admin_better||[]).push([["8227"],{10195:function(e,t,a){var i=a(5563),o=a.n(i),l=a(47444),n=a.n(l)()(o());n.push([e.id,".campaign-container[data-v-42171f8e]{padding:20px}.campaign-container .card-header[data-v-42171f8e]{display:flex;justify-content:space-between;align-items:center;font-weight:bold}.campaign-container .campaign-name[data-v-42171f8e]{display:flex;align-items:center}.campaign-container .campaign-icon-detail[data-v-42171f8e]{width:100px;height:100px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;margin:0 auto}.campaign-container .stat-card[data-v-42171f8e]{text-align:center}.campaign-container .stat-card .stat-title[data-v-42171f8e]{font-size:14px;color:#666;margin-bottom:10px}.campaign-container .stat-card .stat-value[data-v-42171f8e]{font-size:24px;font-weight:bold;color:#333}.campaign-container .pagination-container[data-v-42171f8e]{margin-top:20px;text-align:right}",""]),t.A=n},72558:function(e,t,a){a.r(t),a.d(t,{default:function(){return L}});var i=a(7174);let o={class:"campaign-container"},l={class:"card-header"},n={class:"header-actions"},r={class:"campaign-name"},d={style:{"margin-left":"10px"}},s={class:"campaign-name"},c={style:{"margin-left":"10px"}},p={class:"campaign-name"},m={style:{"margin-left":"10px"}},g={class:"pagination-container"},u={style:{float:"left"}},h={style:{float:"right",color:"#8492a6","font-size":"13px"}},C={class:"dialog-footer"},V={class:"stat-value"},x={class:"stat-value"},f={class:"stat-value"},N={class:"stat-value"},w={ref:"conversionChart",style:{height:"300px"}},y={ref:"salesChart",style:{height:"300px"}},v={class:"dialog-footer"};var b=a(5059),_=a(64049),T={name:"Campaign",components:{Search:b.Search,Discount:b.Discount,Coin:b.Coin,Present:b.Present,Lightning:b.Lightning},data:()=>({activeTab:"all",campaignActiveTab:"statistics",searchText:"",currentPage:1,pageSize:10,totalCampaigns:0,loading:!1,searchingProducts:!1,campaignDialogVisible:!1,detailDialogVisible:!1,editingCampaign:null,campaigns:[{id:1,name:"618年中大促",type:"discount",startTime:"2023-06-01 00:00",endTime:"2023-06-18 23:59",status:"active",targetUsers:["all"],discountRate:80,participants:1256,orders:342,sales:128500,conversionRate:27.3,budget:5e4,createTime:"2023-05-15 10:30:00"},{id:2,name:"新品首发优惠",type:"reduction",startTime:"2023-05-20 00:00",endTime:"2023-05-27 23:59",status:"ended",targetUsers:["new"],reductionCondition:"满200减30",participants:865,orders:210,sales:65420,conversionRate:24.3,budget:2e4,createTime:"2023-05-10 14:45:00"},{id:3,name:"会员专享秒杀",type:"seckill",startTime:"2023-05-25 10:00",endTime:"2023-05-25 12:00",status:"pending",targetUsers:["vip"],seckillPrice:1999,participants:0,orders:0,sales:0,conversionRate:0,budget:1e4,createTime:"2023-05-20 09:15:00"},{id:4,name:"开学季赠品活动",type:"gift",startTime:"2023-08-20 00:00",endTime:"2023-09-10 23:59",status:"draft",targetUsers:["all"],gift:"购买指定商品即赠精美书签一套",participants:0,orders:0,sales:0,conversionRate:0,budget:5e3,createTime:"2023-05-25 16:20:00"}],campaignForm:{name:"",type:"discount",timeRange:[],targetUsers:[],discountRate:90,reductionCondition:"",gift:"",seckillPrice:0,products:[],budget:0},detailCampaign:{},availableProducts:[{id:1,name:"iPhone 14 Pro",price:7999},{id:2,name:"MacBook Pro 14英寸",price:15999},{id:3,name:"AirPods Pro",price:1899},{id:4,name:"iPad Air",price:4399},{id:5,name:"Apple Watch Series 8",price:2999}],campaignRules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],type:[{required:!0,message:"请选择活动类型",trigger:"change"}],timeRange:[{required:!0,message:"请选择活动时间",trigger:"change"}],targetUsers:[{required:!0,message:"请选择目标用户",trigger:"change"}],budget:[{required:!0,message:"请输入活动预算",trigger:"blur"}]},campaignParticipants:[{id:"U1001",name:"张三",phone:"138****8001",orderTime:"2023-06-01 10:30:00",orderAmount:7999},{id:"U1002",name:"李四",phone:"138****8002",orderTime:"2023-06-01 14:45:00",orderAmount:15998}],conversionChart:null,salesChart:null}),computed:{filteredCampaigns(){let e=this.campaigns;this.searchText&&(e=e.filter(e=>e.name.toLowerCase().includes(this.searchText.toLowerCase())));let t=(this.currentPage-1)*this.pageSize,a=t+this.pageSize;return e.slice(t,a)},activeCampaigns(){return this.campaigns.filter(e=>"active"===e.status)},endedCampaigns(){return this.campaigns.filter(e=>"ended"===e.status)}},mounted(){this.initCharts()},beforeUnmount(){this.conversionChart&&this.conversionChart.dispose(),this.salesChart&&this.salesChart.dispose()},methods:{handleTabChange(e){this.activeTab=e,this.currentPage=1},handleSizeChange(e){this.pageSize=e,this.currentPage=1},handleCurrentChange(e){this.currentPage=e},getCampaignText:e=>({discount:"折扣活动",reduction:"满减活动",gift:"赠品活动",seckill:"秒杀活动"})[e]||e,getCampaignType:e=>({discount:"primary",reduction:"success",gift:"warning",seckill:"danger"})[e]||"info",getCampaignIcon:e=>({discount:"Discount",reduction:"Coin",gift:"Present",seckill:"Lightning"})[e]||"Discount",getCampaignColor:e=>({discount:"#409EFF",reduction:"#67C23A",gift:"#E6A23C",seckill:"#F56C6C"})[e]||"#909399",getStatusText:e=>({draft:"草稿",pending:"待启动",active:"进行中",ended:"已结束"})[e]||e,getStatusType:e=>({draft:"info",pending:"warning",active:"success",ended:""})[e]||"info",getTargetUsersText(e){let t={all:"所有用户",new:"新用户",old:"老用户",vip:"VIP用户"};return e&&0!==e.length?e.map(e=>t[e]||e).join("、"):"未设置"},getCampaignRule(e){switch(e.type){case"discount":return`全场${e.discountRate}折`;case"reduction":return e.reductionCondition;case"gift":return e.gift;case"seckill":return`秒杀价\xa5${e.seckillPrice}`;default:return"未设置"}},showAddCampaignDialog(){this.editingCampaign=null,this.campaignForm={name:"",type:"discount",timeRange:[],targetUsers:[],discountRate:90,reductionCondition:"",gift:"",seckillPrice:0,products:[],budget:0},this.campaignDialogVisible=!0,this.$nextTick(()=>{this.$refs.campaignFormRef.resetFields()})},editCampaign(e){this.editingCampaign=e,this.campaignForm={name:e.name,type:e.type,timeRange:[e.startTime,e.endTime],targetUsers:e.targetUsers,discountRate:e.discountRate||90,reductionCondition:e.reductionCondition||"",gift:e.gift||"",seckillPrice:e.seckillPrice||0,products:e.products||[],budget:e.budget},this.campaignDialogVisible=!0},viewCampaign(e){this.detailCampaign={...e},this.detailDialogVisible=!0,this.$nextTick(()=>{this.updateCharts()})},startCampaign(e){this.$confirm(`确定要启动活动"${e.name}"吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let t=this.campaigns.findIndex(t=>t.id===e.id);-1!==t&&(this.campaigns[t].status="active",this.$message.success("活动已启动"),this.detailCampaign.id===e.id&&(this.detailCampaign.status="active"))}).catch(()=>{this.$message.info("已取消操作")})},stopCampaign(e){this.$confirm(`确定要停止活动"${e.name}"吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let t=this.campaigns.findIndex(t=>t.id===e.id);-1!==t&&(this.campaigns[t].status="ended",this.$message.success("活动已停止"),this.detailCampaign.id===e.id&&(this.detailCampaign.status="ended"))}).catch(()=>{this.$message.info("已取消操作")})},saveCampaign(){this.$refs.campaignFormRef.validate(e=>{if(e){if(this.editingCampaign){let e=this.campaigns.findIndex(e=>e.id===this.editingCampaign.id);-1!==e&&(this.campaigns[e]={...this.editingCampaign,...this.campaignForm,startTime:this.campaignForm.timeRange[0],endTime:this.campaignForm.timeRange[1],status:"draft"},this.$message.success("活动更新成功"))}else{let e={id:Date.now(),createTime:new Date().toLocaleString(),status:"draft",participants:0,orders:0,sales:0,conversionRate:0,...this.campaignForm,startTime:this.campaignForm.timeRange[0],endTime:this.campaignForm.timeRange[1]};this.campaigns.push(e),this.totalCampaigns=this.campaigns.length,this.$message.success("活动创建成功")}this.campaignDialogVisible=!1}})},searchProducts(e){""!==e?(this.searchingProducts=!0,setTimeout(()=>{this.searchingProducts=!1},200)):this.availableProducts=[]},initCharts(){this.conversionChart=_.Ts(this.$refs.conversionChart),this.conversionChart.setOption(this.getConversionChartOption()),this.salesChart=_.Ts(this.$refs.salesChart),this.salesChart.setOption(this.getSalesChartOption())},updateCharts(){this.conversionChart&&this.conversionChart.setOption(this.getConversionChartOption()),this.salesChart&&this.salesChart.setOption(this.getSalesChartOption())},getConversionChartOption:()=>({title:{text:"转化率趋势"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:["6.1","6.2","6.3","6.4","6.5","6.6","6.7"]},yAxis:{type:"value"},series:[{data:[20,25,28,30,27,32,27.3],type:"line",smooth:!0}]}),getSalesChartOption:()=>({title:{text:"销售额趋势"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:["6.1","6.2","6.3","6.4","6.5","6.6","6.7"]},yAxis:{type:"value"},series:[{data:[15e3,22e3,28e3,32e3,29e3,35e3,32e3],type:"line",smooth:!0}]})}},k=a(7368),D=a.n(k),S=a(60473),F=a.n(S),P=a(62915),B=a.n(P),E=a(14808),R=a.n(E),U=a(85364),z=a.n(U),A=a(78577),$=a.n(A),I=a(10195),O={};O.styleTagTransform=$(),O.setAttributes=R(),O.insert=B().bind(null,"head"),O.domAPI=F(),O.insertStyleElement=z(),D()(I.A,O),I.A&&I.A.locals&&I.A.locals;var L=(0,a(92260).default)(T,[["render",function(e,t,a,b,_,T){let k=(0,i.resolveComponent)("Search"),D=(0,i.resolveComponent)("el-icon"),S=(0,i.resolveComponent)("el-input"),F=(0,i.resolveComponent)("el-button"),P=(0,i.resolveComponent)("el-avatar"),B=(0,i.resolveComponent)("el-table-column"),E=(0,i.resolveComponent)("el-tag"),R=(0,i.resolveComponent)("el-table"),U=(0,i.resolveComponent)("el-tab-pane"),z=(0,i.resolveComponent)("el-tabs"),A=(0,i.resolveComponent)("el-pagination"),$=(0,i.resolveComponent)("el-card"),I=(0,i.resolveComponent)("el-form-item"),O=(0,i.resolveComponent)("Discount"),L=(0,i.resolveComponent)("el-option"),Y=(0,i.resolveComponent)("Coin"),q=(0,i.resolveComponent)("Present"),M=(0,i.resolveComponent)("Lightning"),j=(0,i.resolveComponent)("el-select"),H=(0,i.resolveComponent)("el-date-picker"),W=(0,i.resolveComponent)("el-col"),G=(0,i.resolveComponent)("el-input-number"),J=(0,i.resolveComponent)("el-row"),K=(0,i.resolveComponent)("el-form"),Q=(0,i.resolveComponent)("el-dialog"),X=(0,i.resolveComponent)("el-descriptions-item"),Z=(0,i.resolveComponent)("el-descriptions"),ee=(0,i.resolveDirective)("loading");return(0,i.openBlock)(),(0,i.createElementBlock)("div",o,[(0,i.createVNode)($,{shadow:"never"},{header:(0,i.withCtx)(()=>[(0,i.createElementVNode)("div",l,[t[22]||(t[22]=(0,i.createElementVNode)("span",null,"营销活动",-1)),(0,i.createElementVNode)("div",n,[(0,i.createVNode)(S,{modelValue:_.searchText,"onUpdate:modelValue":t[0]||(t[0]=e=>_.searchText=e),placeholder:"搜索活动...",clearable:"",style:{width:"200px","margin-right":"10px"}},{prefix:(0,i.withCtx)(()=>[(0,i.createVNode)(D,null,{default:(0,i.withCtx)(()=>[(0,i.createVNode)(k)]),_:1})]),_:1},8,["modelValue"]),(0,i.createVNode)(F,{type:"primary",onClick:T.showAddCampaignDialog},{default:(0,i.withCtx)(()=>[...t[21]||(t[21]=[(0,i.createTextVNode)("创建活动",-1)])]),_:1},8,["onClick"])])])]),default:(0,i.withCtx)(()=>[(0,i.createVNode)(z,{modelValue:_.activeTab,"onUpdate:modelValue":t[1]||(t[1]=e=>_.activeTab=e),onTabChange:T.handleTabChange},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(U,{label:"所有活动",name:"all"},{default:(0,i.withCtx)(()=>[(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(R,{data:T.filteredCampaigns,style:{width:"100%"},"row-key":"id"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(B,{prop:"name",label:"活动名称","min-width":"200"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createElementVNode)("div",r,[(0,i.createVNode)(P,{size:32,style:(0,i.normalizeStyle)({backgroundColor:T.getCampaignColor(e.type)})},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(D,null,{default:(0,i.withCtx)(()=>[((0,i.openBlock)(),(0,i.createBlock)((0,i.resolveDynamicComponent)(T.getCampaignIcon(e.type))))]),_:2},1024)]),_:2},1032,["style"]),(0,i.createElementVNode)("span",d,(0,i.toDisplayString)(e.name),1)])]),_:1}),(0,i.createVNode)(B,{prop:"type",label:"活动类型",width:"120"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createVNode)(E,{type:T.getCampaignType(e.type)},{default:(0,i.withCtx)(()=>[(0,i.createTextVNode)((0,i.toDisplayString)(T.getCampaignText(e.type)),1)]),_:2},1032,["type"])]),_:1}),(0,i.createVNode)(B,{label:"活动时间","min-width":"200"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createElementVNode)("div",null,(0,i.toDisplayString)(e.startTime)+" 至 "+(0,i.toDisplayString)(e.endTime),1)]),_:1}),(0,i.createVNode)(B,{label:"状态",width:"100"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createVNode)(E,{type:T.getStatusType(e.status)},{default:(0,i.withCtx)(()=>[(0,i.createTextVNode)((0,i.toDisplayString)(T.getStatusText(e.status)),1)]),_:2},1032,["type"])]),_:1}),(0,i.createVNode)(B,{label:"参与人数",width:"100"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.participants),1)]),_:1}),(0,i.createVNode)(B,{label:"转化率",width:"100"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.conversionRate)+"% ",1)]),_:1}),(0,i.createVNode)(B,{label:"操作",width:"200"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createVNode)(F,{type:"text",onClick:t=>T.viewCampaign(e)},{default:(0,i.withCtx)(()=>[...t[23]||(t[23]=[(0,i.createTextVNode)("查看",-1)])]),_:1},8,["onClick"]),(0,i.createVNode)(F,{type:"text",onClick:t=>T.editCampaign(e)},{default:(0,i.withCtx)(()=>[...t[24]||(t[24]=[(0,i.createTextVNode)("编辑",-1)])]),_:1},8,["onClick"]),"draft"===e.status||"pending"===e.status?((0,i.openBlock)(),(0,i.createBlock)(F,{key:0,type:"text",onClick:t=>T.startCampaign(e)},{default:(0,i.withCtx)(()=>[...t[25]||(t[25]=[(0,i.createTextVNode)(" 启动 ",-1)])]),_:1},8,["onClick"])):(0,i.createCommentVNode)("v-if",!0),"active"===e.status?((0,i.openBlock)(),(0,i.createBlock)(F,{key:1,type:"text",onClick:t=>T.stopCampaign(e)},{default:(0,i.withCtx)(()=>[...t[26]||(t[26]=[(0,i.createTextVNode)(" 停止 ",-1)])]),_:1},8,["onClick"])):(0,i.createCommentVNode)("v-if",!0)]),_:1})]),_:1},8,["data"])),[[ee,_.loading]])]),_:1}),(0,i.createVNode)(U,{label:"进行中",name:"active"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(R,{data:T.activeCampaigns,style:{width:"100%"},"row-key":"id"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(B,{prop:"name",label:"活动名称","min-width":"200"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createElementVNode)("div",s,[(0,i.createVNode)(P,{size:32,style:(0,i.normalizeStyle)({backgroundColor:T.getCampaignColor(e.type)})},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(D,null,{default:(0,i.withCtx)(()=>[((0,i.openBlock)(),(0,i.createBlock)((0,i.resolveDynamicComponent)(T.getCampaignIcon(e.type))))]),_:2},1024)]),_:2},1032,["style"]),(0,i.createElementVNode)("span",c,(0,i.toDisplayString)(e.name),1)])]),_:1}),(0,i.createVNode)(B,{prop:"type",label:"活动类型",width:"120"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createVNode)(E,{type:T.getCampaignType(e.type)},{default:(0,i.withCtx)(()=>[(0,i.createTextVNode)((0,i.toDisplayString)(T.getCampaignText(e.type)),1)]),_:2},1032,["type"])]),_:1}),(0,i.createVNode)(B,{label:"活动时间","min-width":"200"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createElementVNode)("div",null,(0,i.toDisplayString)(e.startTime)+" 至 "+(0,i.toDisplayString)(e.endTime),1)]),_:1}),(0,i.createVNode)(B,{label:"参与人数",width:"100"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.participants),1)]),_:1}),(0,i.createVNode)(B,{label:"转化率",width:"100"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.conversionRate)+"% ",1)]),_:1}),(0,i.createVNode)(B,{label:"操作",width:"150"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createVNode)(F,{type:"text",onClick:t=>T.viewCampaign(e)},{default:(0,i.withCtx)(()=>[...t[27]||(t[27]=[(0,i.createTextVNode)("查看",-1)])]),_:1},8,["onClick"]),(0,i.createVNode)(F,{type:"text",onClick:t=>T.stopCampaign(e)},{default:(0,i.withCtx)(()=>[...t[28]||(t[28]=[(0,i.createTextVNode)("停止",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),(0,i.createVNode)(U,{label:"已结束",name:"ended"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(R,{data:T.endedCampaigns,style:{width:"100%"},"row-key":"id"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(B,{prop:"name",label:"活动名称","min-width":"200"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createElementVNode)("div",p,[(0,i.createVNode)(P,{size:32,style:(0,i.normalizeStyle)({backgroundColor:T.getCampaignColor(e.type)})},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(D,null,{default:(0,i.withCtx)(()=>[((0,i.openBlock)(),(0,i.createBlock)((0,i.resolveDynamicComponent)(T.getCampaignIcon(e.type))))]),_:2},1024)]),_:2},1032,["style"]),(0,i.createElementVNode)("span",m,(0,i.toDisplayString)(e.name),1)])]),_:1}),(0,i.createVNode)(B,{prop:"type",label:"活动类型",width:"120"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createVNode)(E,{type:T.getCampaignType(e.type)},{default:(0,i.withCtx)(()=>[(0,i.createTextVNode)((0,i.toDisplayString)(T.getCampaignText(e.type)),1)]),_:2},1032,["type"])]),_:1}),(0,i.createVNode)(B,{label:"活动时间","min-width":"200"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createElementVNode)("div",null,(0,i.toDisplayString)(e.startTime)+" 至 "+(0,i.toDisplayString)(e.endTime),1)]),_:1}),(0,i.createVNode)(B,{label:"参与人数",width:"100"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.participants),1)]),_:1}),(0,i.createVNode)(B,{label:"转化率",width:"100"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.conversionRate)+"% ",1)]),_:1}),(0,i.createVNode)(B,{label:"操作",width:"100"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createVNode)(F,{type:"text",onClick:t=>T.viewCampaign(e)},{default:(0,i.withCtx)(()=>[...t[29]||(t[29]=[(0,i.createTextVNode)("查看",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue","onTabChange"]),(0,i.createElementVNode)("div",g,[(0,i.createVNode)(A,{"current-page":_.currentPage,"onUpdate:currentPage":t[2]||(t[2]=e=>_.currentPage=e),"page-size":_.pageSize,"onUpdate:pageSize":t[3]||(t[3]=e=>_.pageSize=e),"page-sizes":[10,20,50,100],total:_.totalCampaigns,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:T.handleSizeChange,onCurrentChange:T.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),(0,i.createCommentVNode)(" 创建/编辑活动对话框 "),(0,i.createVNode)(Q,{modelValue:_.campaignDialogVisible,"onUpdate:modelValue":t[15]||(t[15]=e=>_.campaignDialogVisible=e),title:_.editingCampaign?"编辑活动":"创建活动",width:"800px"},{footer:(0,i.withCtx)(()=>[(0,i.createElementVNode)("span",C,[(0,i.createVNode)(F,{onClick:t[14]||(t[14]=e=>_.campaignDialogVisible=!1)},{default:(0,i.withCtx)(()=>[...t[39]||(t[39]=[(0,i.createTextVNode)("取消",-1)])]),_:1}),(0,i.createVNode)(F,{type:"primary",onClick:T.saveCampaign},{default:(0,i.withCtx)(()=>[...t[40]||(t[40]=[(0,i.createTextVNode)(" 保存 ",-1)])]),_:1},8,["onClick"])])]),default:(0,i.withCtx)(()=>[(0,i.createVNode)(K,{ref:"campaignFormRef",model:_.campaignForm,rules:_.campaignRules,"label-width":"100px"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(J,{gutter:20},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(W,{span:12},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(I,{label:"活动名称",prop:"name"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(S,{modelValue:_.campaignForm.name,"onUpdate:modelValue":t[4]||(t[4]=e=>_.campaignForm.name=e)},null,8,["modelValue"])]),_:1}),(0,i.createVNode)(I,{label:"活动类型",prop:"type"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(j,{modelValue:_.campaignForm.type,"onUpdate:modelValue":t[5]||(t[5]=e=>_.campaignForm.type=e),placeholder:"请选择活动类型",style:{width:"100%"}},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(L,{label:"折扣活动",value:"discount"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(D,null,{default:(0,i.withCtx)(()=>[(0,i.createVNode)(O)]),_:1}),t[30]||(t[30]=(0,i.createElementVNode)("span",{style:{"margin-left":"10px"}},"折扣活动",-1))]),_:1}),(0,i.createVNode)(L,{label:"满减活动",value:"reduction"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(D,null,{default:(0,i.withCtx)(()=>[(0,i.createVNode)(Y)]),_:1}),t[31]||(t[31]=(0,i.createElementVNode)("span",{style:{"margin-left":"10px"}},"满减活动",-1))]),_:1}),(0,i.createVNode)(L,{label:"赠品活动",value:"gift"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(D,null,{default:(0,i.withCtx)(()=>[(0,i.createVNode)(q)]),_:1}),t[32]||(t[32]=(0,i.createElementVNode)("span",{style:{"margin-left":"10px"}},"赠品活动",-1))]),_:1}),(0,i.createVNode)(L,{label:"秒杀活动",value:"seckill"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(D,null,{default:(0,i.withCtx)(()=>[(0,i.createVNode)(M)]),_:1}),t[33]||(t[33]=(0,i.createElementVNode)("span",{style:{"margin-left":"10px"}},"秒杀活动",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,i.createVNode)(I,{label:"活动时间",prop:"timeRange"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(H,{modelValue:_.campaignForm.timeRange,"onUpdate:modelValue":t[6]||(t[6]=e=>_.campaignForm.timeRange=e),type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),(0,i.createVNode)(I,{label:"目标用户",prop:"targetUsers"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(j,{modelValue:_.campaignForm.targetUsers,"onUpdate:modelValue":t[7]||(t[7]=e=>_.campaignForm.targetUsers=e),multiple:"",placeholder:"请选择目标用户",style:{width:"100%"}},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(L,{label:"所有用户",value:"all"}),(0,i.createVNode)(L,{label:"新用户",value:"new"}),(0,i.createVNode)(L,{label:"老用户",value:"old"}),(0,i.createVNode)(L,{label:"VIP用户",value:"vip"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,i.createVNode)(W,{span:12},{default:(0,i.withCtx)(()=>["discount"===_.campaignForm.type?((0,i.openBlock)(),(0,i.createBlock)(I,{key:0,label:"折扣率",prop:"discountRate"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(G,{modelValue:_.campaignForm.discountRate,"onUpdate:modelValue":t[8]||(t[8]=e=>_.campaignForm.discountRate=e),min:0,max:100,"controls-position":"right",style:{width:"100%"}},{append:(0,i.withCtx)(()=>[...t[34]||(t[34]=[(0,i.createTextVNode)("%",-1)])]),_:1},8,["modelValue"])]),_:1})):(0,i.createCommentVNode)("v-if",!0),"reduction"===_.campaignForm.type?((0,i.openBlock)(),(0,i.createBlock)(I,{key:1,label:"满减条件",prop:"reductionCondition"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(S,{modelValue:_.campaignForm.reductionCondition,"onUpdate:modelValue":t[9]||(t[9]=e=>_.campaignForm.reductionCondition=e),placeholder:"例如：满300减50"},{prepend:(0,i.withCtx)(()=>[...t[35]||(t[35]=[(0,i.createTextVNode)("满",-1)])]),append:(0,i.withCtx)(()=>[...t[36]||(t[36]=[(0,i.createTextVNode)("元减",-1)])]),_:1},8,["modelValue"])]),_:1})):(0,i.createCommentVNode)("v-if",!0),"gift"===_.campaignForm.type?((0,i.openBlock)(),(0,i.createBlock)(I,{key:2,label:"赠品",prop:"gift"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(S,{modelValue:_.campaignForm.gift,"onUpdate:modelValue":t[10]||(t[10]=e=>_.campaignForm.gift=e),placeholder:"请输入赠品信息"},null,8,["modelValue"])]),_:1})):(0,i.createCommentVNode)("v-if",!0),"seckill"===_.campaignForm.type?((0,i.openBlock)(),(0,i.createBlock)(I,{key:3,label:"秒杀价",prop:"seckillPrice"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(G,{modelValue:_.campaignForm.seckillPrice,"onUpdate:modelValue":t[11]||(t[11]=e=>_.campaignForm.seckillPrice=e),min:0,"controls-position":"right",style:{width:"100%"}},{append:(0,i.withCtx)(()=>[...t[37]||(t[37]=[(0,i.createTextVNode)("元",-1)])]),_:1},8,["modelValue"])]),_:1})):(0,i.createCommentVNode)("v-if",!0),(0,i.createVNode)(I,{label:"适用商品"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(j,{modelValue:_.campaignForm.products,"onUpdate:modelValue":t[12]||(t[12]=e=>_.campaignForm.products=e),multiple:"",filterable:"",remote:"","remote-method":T.searchProducts,loading:_.searchingProducts,placeholder:"请选择适用商品",style:{width:"100%"}},{default:(0,i.withCtx)(()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(_.availableProducts,e=>((0,i.openBlock)(),(0,i.createBlock)(L,{key:e.id,label:e.name,value:e.id},{default:(0,i.withCtx)(()=>[(0,i.createElementVNode)("span",u,(0,i.toDisplayString)(e.name),1),(0,i.createElementVNode)("span",h," \xa5"+(0,i.toDisplayString)(e.price),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","remote-method","loading"])]),_:1}),(0,i.createVNode)(I,{label:"活动预算",prop:"budget"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(G,{modelValue:_.campaignForm.budget,"onUpdate:modelValue":t[13]||(t[13]=e=>_.campaignForm.budget=e),min:0,"controls-position":"right",style:{width:"100%"}},{append:(0,i.withCtx)(()=>[...t[38]||(t[38]=[(0,i.createTextVNode)("元",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),(0,i.createCommentVNode)(" 活动详情对话框 "),(0,i.createVNode)(Q,{modelValue:_.detailDialogVisible,"onUpdate:modelValue":t[20]||(t[20]=e=>_.detailDialogVisible=e),title:"活动详情",width:"1000px"},{footer:(0,i.withCtx)(()=>[(0,i.createElementVNode)("span",v,[(0,i.createVNode)(F,{onClick:t[17]||(t[17]=e=>_.detailDialogVisible=!1)},{default:(0,i.withCtx)(()=>[...t[45]||(t[45]=[(0,i.createTextVNode)("关闭",-1)])]),_:1}),"draft"===_.detailCampaign.status||"pending"===_.detailCampaign.status?((0,i.openBlock)(),(0,i.createBlock)(F,{key:0,type:"primary",onClick:t[18]||(t[18]=e=>T.startCampaign(_.detailCampaign))},{default:(0,i.withCtx)(()=>[...t[46]||(t[46]=[(0,i.createTextVNode)(" 启动活动 ",-1)])]),_:1})):(0,i.createCommentVNode)("v-if",!0),"active"===_.detailCampaign.status?((0,i.openBlock)(),(0,i.createBlock)(F,{key:1,type:"danger",onClick:t[19]||(t[19]=e=>T.stopCampaign(_.detailCampaign))},{default:(0,i.withCtx)(()=>[...t[47]||(t[47]=[(0,i.createTextVNode)(" 停止活动 ",-1)])]),_:1})):(0,i.createCommentVNode)("v-if",!0)])]),default:(0,i.withCtx)(()=>[(0,i.createVNode)(J,{gutter:20},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(W,{span:16},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(Z,{column:1,border:""},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(X,{label:"活动名称"},{default:(0,i.withCtx)(()=>[(0,i.createTextVNode)((0,i.toDisplayString)(_.detailCampaign.name),1)]),_:1}),(0,i.createVNode)(X,{label:"活动类型"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(E,{type:T.getCampaignType(_.detailCampaign.type)},{default:(0,i.withCtx)(()=>[(0,i.createTextVNode)((0,i.toDisplayString)(T.getCampaignText(_.detailCampaign.type)),1)]),_:1},8,["type"])]),_:1}),(0,i.createVNode)(X,{label:"活动时间"},{default:(0,i.withCtx)(()=>[(0,i.createTextVNode)((0,i.toDisplayString)(_.detailCampaign.startTime)+" 至 "+(0,i.toDisplayString)(_.detailCampaign.endTime),1)]),_:1}),(0,i.createVNode)(X,{label:"状态"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(E,{type:T.getStatusType(_.detailCampaign.status)},{default:(0,i.withCtx)(()=>[(0,i.createTextVNode)((0,i.toDisplayString)(T.getStatusText(_.detailCampaign.status)),1)]),_:1},8,["type"])]),_:1}),(0,i.createVNode)(X,{label:"目标用户"},{default:(0,i.withCtx)(()=>[(0,i.createTextVNode)((0,i.toDisplayString)(T.getTargetUsersText(_.detailCampaign.targetUsers)),1)]),_:1}),(0,i.createVNode)(X,{label:"活动规则"},{default:(0,i.withCtx)(()=>[(0,i.createTextVNode)((0,i.toDisplayString)(T.getCampaignRule(_.detailCampaign)),1)]),_:1}),(0,i.createVNode)(X,{label:"活动预算"},{default:(0,i.withCtx)(()=>[(0,i.createTextVNode)("\xa5"+(0,i.toDisplayString)(_.detailCampaign.budget),1)]),_:1}),(0,i.createVNode)(X,{label:"创建时间"},{default:(0,i.withCtx)(()=>[(0,i.createTextVNode)((0,i.toDisplayString)(_.detailCampaign.createTime),1)]),_:1})]),_:1})]),_:1}),(0,i.createVNode)(W,{span:8},{default:(0,i.withCtx)(()=>[(0,i.createElementVNode)("div",{class:"campaign-icon-detail",style:(0,i.normalizeStyle)({backgroundColor:T.getCampaignColor(_.detailCampaign.type)})},[(0,i.createVNode)(D,{size:60},{default:(0,i.withCtx)(()=>[((0,i.openBlock)(),(0,i.createBlock)((0,i.resolveDynamicComponent)(T.getCampaignIcon(_.detailCampaign.type))))]),_:1})],4)]),_:1})]),_:1}),(0,i.createVNode)(z,{modelValue:_.campaignActiveTab,"onUpdate:modelValue":t[16]||(t[16]=e=>_.campaignActiveTab=e),style:{"margin-top":"20px"}},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(U,{label:"数据统计",name:"statistics"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(J,{gutter:20,style:{"margin-bottom":"20px"}},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(W,{span:6},{default:(0,i.withCtx)(()=>[(0,i.createVNode)($,{class:"stat-card",shadow:"never"},{default:(0,i.withCtx)(()=>[t[41]||(t[41]=(0,i.createElementVNode)("div",{class:"stat-title"},"参与人数",-1)),(0,i.createElementVNode)("div",V,(0,i.toDisplayString)(_.detailCampaign.participants),1)]),_:1})]),_:1}),(0,i.createVNode)(W,{span:6},{default:(0,i.withCtx)(()=>[(0,i.createVNode)($,{class:"stat-card",shadow:"never"},{default:(0,i.withCtx)(()=>[t[42]||(t[42]=(0,i.createElementVNode)("div",{class:"stat-title"},"订单数量",-1)),(0,i.createElementVNode)("div",x,(0,i.toDisplayString)(_.detailCampaign.orders),1)]),_:1})]),_:1}),(0,i.createVNode)(W,{span:6},{default:(0,i.withCtx)(()=>[(0,i.createVNode)($,{class:"stat-card",shadow:"never"},{default:(0,i.withCtx)(()=>[t[43]||(t[43]=(0,i.createElementVNode)("div",{class:"stat-title"},"销售额",-1)),(0,i.createElementVNode)("div",f,"\xa5"+(0,i.toDisplayString)(_.detailCampaign.sales),1)]),_:1})]),_:1}),(0,i.createVNode)(W,{span:6},{default:(0,i.withCtx)(()=>[(0,i.createVNode)($,{class:"stat-card",shadow:"never"},{default:(0,i.withCtx)(()=>[t[44]||(t[44]=(0,i.createElementVNode)("div",{class:"stat-title"},"转化率",-1)),(0,i.createElementVNode)("div",N,(0,i.toDisplayString)(_.detailCampaign.conversionRate)+"%",1)]),_:1})]),_:1})]),_:1}),(0,i.createVNode)(J,{gutter:20},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(W,{span:12},{default:(0,i.withCtx)(()=>[(0,i.createVNode)($,{shadow:"never"},{default:(0,i.withCtx)(()=>[(0,i.createElementVNode)("div",w,null,512)]),_:1})]),_:1}),(0,i.createVNode)(W,{span:12},{default:(0,i.withCtx)(()=>[(0,i.createVNode)($,{shadow:"never"},{default:(0,i.withCtx)(()=>[(0,i.createElementVNode)("div",y,null,512)]),_:1})]),_:1})]),_:1})]),_:1}),(0,i.createVNode)(U,{label:"参与用户",name:"participants"},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(R,{data:_.campaignParticipants,style:{width:"100%"}},{default:(0,i.withCtx)(()=>[(0,i.createVNode)(B,{prop:"id",label:"用户ID",width:"100"}),(0,i.createVNode)(B,{prop:"name",label:"用户名",width:"150"}),(0,i.createVNode)(B,{prop:"phone",label:"手机号",width:"150"}),(0,i.createVNode)(B,{prop:"orderTime",label:"下单时间",width:"180"}),(0,i.createVNode)(B,{prop:"orderAmount",label:"订单金额",width:"120"},{default:(0,i.withCtx)(({row:e})=>[(0,i.createTextVNode)(" \xa5"+(0,i.toDisplayString)(e.orderAmount),1)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}],["__scopeId","data-v-42171f8e"]])}}]);