"use strict";(self.webpackChunkvue_admin_better=self.webpackChunkvue_admin_better||[]).push([["5632"],{58315:function(e,n,t){t.r(n),t.d(n,{createForm:function(){return o},deleteForm:function(){return s},getForm:function(){return l},getForms:function(){return r},updateForm:function(){return i}});var a=t(49289);function r(e={}){return a.default.get("/form",{params:e}).then(e=>e.data)}function l(e){return a.default.get(`/form/${e}`).then(e=>e.data)}function o(e){return a.default.post("/form",e).then(e=>e.data)}function i(e,n){return a.default.patch(`/form/${e}`,n).then(e=>e.data)}function s(e){return a.default.delete(`/form/${e}`).then(()=>!0)}},40409:function(e,n,t){var a=t(26741),r=t.n(a),l=t(63494),o=t.n(l)()(r());o.push([e.id,"\n.template-list[data-v-06e83e0e] {\n  padding: 20px;\n  background-color: #fff;\n  min-height: calc(100vh - 120px);\n}\n.toolbar[data-v-06e83e0e] {\n  display: flex;\n  align-items: center;\n  margin-bottom: 24px;\n  gap: 16px;\n}\n.grow[data-v-06e83e0e] {\n  flex: 1;\n}\n.grid[data-v-06e83e0e] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  gap: 24px;\n}\n.card[data-v-06e83e0e] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  transition: transform 0.2s ease;\n}\n.card[data-v-06e83e0e]:hover {\n  transform: translateY(-4px);\n}\n.card-hd[data-v-06e83e0e] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n.name[data-v-06e83e0e] {\n  font-size: 16px;\n  font-weight: 600;\n  color: #1989fa;\n}\n.team[data-v-06e83e0e] {\n  font-size: 12px;\n  color: #666;\n  background-color: #f0f2f5;\n  padding: 2px 10px;\n  border-radius: 16px;\n}\n.desc[data-v-06e83e0e] {\n  margin: 16px 0;\n  color: #666;\n  flex: 1;\n  line-height: 1.6;\n  font-size: 14px;\n}\n.ops[data-v-06e83e0e] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n  margin-top: 12px;\n}\n",""]),n.A=o},14787:function(e,n,t){t.r(n),t.d(n,{default:function(){return z}});var a=t(65611),r=t(10365),l=t(67312),o=t(58315);let i={class:"template-list"},s={class:"toolbar"},d={key:1,class:"grid"},u={class:"card-hd"},c={class:"name"},f={class:"team"},p={class:"desc"},m={class:"ops"};var v=t(66270),g=t.n(v),h=t(38007),k=t.n(h),y=t(92669),x=t.n(y),b=t(23566),_=t.n(b),w=t(76106),F=t.n(w),C=t(12527),A=t.n(C),L=t(40409),W={};W.styleTagTransform=A(),W.setAttributes=_(),W.insert=x().bind(null,"head"),W.domAPI=k(),W.insertStyleElement=F(),g()(L.A,W),L.A&&L.A.locals&&L.A.locals;var z=(0,t(4786).default)({__name:"form",setup(e){let n=(0,r.rd)(),t=(0,a.KR)(""),v=(0,a.KR)([]);async function g(){try{let e=await (0,o.getForms)();console.log("getForms =>",e),v.value=Array.isArray(e?.list)?e.list:[]}catch(e){l.n.error("加载模板失败："+(e.message||"服务器异常")),v.value=[]}}(0,a.sV)(g);let h=(0,a.EW)(()=>{let e=t.value.trim().toLowerCase();return e?v.value.filter(n=>[n.name,n.teamName,n.description].some(n=>String(n??"").toLowerCase().includes(e))):v.value});function k(){n.push({path:"/form",query:{mode:"new"}})}async function y(e){try{await (0,o.deleteForm)(e),l.n.success("删除成功！"),g()}catch(e){l.n.error("删除失败："+(e.message||"操作异常"))}}return(e,r)=>{let l=(0,a.g2)("el-input"),o=(0,a.g2)("el-button"),v=(0,a.g2)("el-empty"),g=(0,a.g2)("el-popconfirm"),x=(0,a.g2)("el-card");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("div",s,[(0,a.bF)(l,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=e=>t.value=e),placeholder:"搜索模板名称或团队名称",clearable:"",class:"w-64"},null,8,["modelValue"]),r[2]||(r[2]=(0,a.Lk)("div",{class:"grow"},null,-1)),(0,a.bF)(o,{type:"primary",onClick:k},{default:(0,a.k6)(()=>[...r[1]||(r[1]=[(0,a.eW)("新建模板",-1)])]),_:1})]),0===h.value.length?((0,a.uX)(),(0,a.Wv)(v,{key:0,description:"暂无模板"},{extra:(0,a.k6)(()=>[(0,a.bF)(o,{type:"primary",onClick:k},{default:(0,a.k6)(()=>[...r[3]||(r[3]=[(0,a.eW)("去新建",-1)])]),_:1})]),_:1})):((0,a.uX)(),(0,a.CE)("div",d,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(h.value,e=>((0,a.uX)(),(0,a.Wv)(x,{key:e.id,class:"card",shadow:"hover"},{header:(0,a.k6)(()=>[(0,a.Lk)("div",u,[(0,a.Lk)("b",c,(0,a.v_)(e.name),1),(0,a.Lk)("span",f,(0,a.v_)(e.teamName),1)])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",p,(0,a.v_)(e.description||"无描述"),1),(0,a.Lk)("div",m,[(0,a.bF)(o,{size:"small",type:"primary",onClick:t=>{var a;return a=e.id,void n.push({path:"/form",query:{id:String(a)}})}},{default:(0,a.k6)(()=>[...r[4]||(r[4]=[(0,a.eW)("编辑",-1)])]),_:1},8,["onClick"]),(0,a.bF)(o,{size:"small",onClick:t=>{var a;return a=e.id,void n.push({path:"/form",query:{id:String(a),preview:"true"}})}},{default:(0,a.k6)(()=>[...r[5]||(r[5]=[(0,a.eW)("预览",-1)])]),_:1},8,["onClick"]),(0,a.bF)(g,{title:"确认删除此模板？",onConfirm:n=>y(e.id)},{reference:(0,a.k6)(()=>[(0,a.bF)(o,{size:"small",type:"danger"},{default:(0,a.k6)(()=>[...r[6]||(r[6]=[(0,a.eW)("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])])]),_:2},1024))),128))]))])}}},[["__scopeId","data-v-06e83e0e"]])}}]);