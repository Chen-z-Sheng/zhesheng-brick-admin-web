"use strict";(self.webpackChunkvue_admin_better=self.webpackChunkvue_admin_better||[]).push([["3524"],{60466:function(e,n,t){t.r(n),t.d(n,{createFormTemplate:function(){return i},deleteFormTemplate:function(){return d},getFormTemplate:function(){return l},getFormTemplates:function(){return r},updateFormTemplate:function(){return o}});var a=t(49289);function r(e={}){return a.default.get("/admin/form-template",{params:e}).then(e=>e.data)}function l(e){return a.default.get(`/admin/form-template/${e}`).then(e=>e.data)}function i(e){return a.default.post("/admin/form-template",e).then(e=>e.data)}function o(e,n){return a.default.patch(`/admin/form-template/${e}`,n).then(e=>e.data)}function d(e){return a.default.delete(`/admin/form-template/${e}`).then(()=>!0)}},26723:function(e,n,t){var a=t(15058),r=t.n(a),l=t(9915),i=t.n(l)()(r());i.push([e.id,"\n.template-list[data-v-cec575be] {\n  padding: 20px;\n  background-color: #fff;\n  min-height: calc(100vh - 120px);\n}\n.toolbar[data-v-cec575be] {\n  display: flex;\n  align-items: center;\n  margin-bottom: 24px;\n  gap: 16px;\n}\n.grow[data-v-cec575be] {\n  flex: 1;\n}\n.grid[data-v-cec575be] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  gap: 24px;\n}\n.card[data-v-cec575be] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  transition: transform 0.2s ease;\n}\n.card[data-v-cec575be]:hover {\n  transform: translateY(-4px);\n}\n.card-hd[data-v-cec575be] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n.name[data-v-cec575be] {\n  font-size: 16px;\n  font-weight: 600;\n  color: #1989fa;\n}\n.team[data-v-cec575be] {\n  font-size: 12px;\n  color: #666;\n  background-color: #f0f2f5;\n  padding: 2px 10px;\n  border-radius: 16px;\n}\n.desc[data-v-cec575be] {\n  margin: 16px 0;\n  color: #666;\n  flex: 1;\n  line-height: 1.6;\n  font-size: 14px;\n}\n.ops[data-v-cec575be] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n  margin-top: 12px;\n}\n",""]),n.A=i},2607:function(e,n,t){t.r(n),t.d(n,{default:function(){return W}});var a=t(79754),r=t(79458),l=t(29986),i=t(60466);let o={class:"template-list"},d={class:"toolbar"},c={key:1,class:"grid"},s={class:"card-hd"},u={class:"name"},p={class:"team"},m={class:"desc"},f={class:"ops"};var v=t(66270),g=t.n(v),b=t(38007),h=t.n(b),k=t(92669),x=t.n(k),y=t(23566),_=t.n(y),w=t(76106),F=t.n(w),C=t(12527),T=t.n(C),A=t(26723),L={};L.styleTagTransform=T(),L.setAttributes=_(),L.insert=x().bind(null,"head"),L.domAPI=h(),L.insertStyleElement=F(),g()(A.A,L),A.A&&A.A.locals&&A.A.locals;var W=(0,t(16784).default)({__name:"index",setup(e){let n=(0,r.rd)(),t=(0,a.KR)(""),v=(0,a.KR)([]);async function g(){try{let e=await (0,i.getFormTemplates)();console.log("getFormTemplates =>",e),v.value=Array.isArray(e?.list)?e.list:[]}catch(e){l.n.error("加载模板失败："+(e.message||"服务器异常")),v.value=[]}}(0,a.sV)(g);let b=(0,a.EW)(()=>{let e=t.value.trim().toLowerCase();return e?v.value.filter(n=>[n.name,n.teamName,n.description].some(n=>String(n??"").toLowerCase().includes(e))):v.value});function h(){n.push({path:"/form-template/edit",query:{mode:"new"}})}async function k(e){try{await (0,i.deleteFormTemplate)(e),l.n.success("删除成功！"),g()}catch(e){l.n.error("删除失败："+(e.message||"操作异常"))}}return(e,r)=>{let l=(0,a.g2)("el-input"),i=(0,a.g2)("el-button"),v=(0,a.g2)("el-empty"),g=(0,a.g2)("el-popconfirm"),x=(0,a.g2)("el-card");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",d,[(0,a.bF)(l,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=e=>t.value=e),placeholder:"搜索模板名称或团队名称",clearable:"",class:"w-64"},null,8,["modelValue"]),r[2]||(r[2]=(0,a.Lk)("div",{class:"grow"},null,-1)),(0,a.bF)(i,{type:"primary",onClick:h},{default:(0,a.k6)(()=>[...r[1]||(r[1]=[(0,a.eW)("新建模板",-1)])]),_:1})]),0===b.value.length?((0,a.uX)(),(0,a.Wv)(v,{key:0,description:"暂无模板"},{extra:(0,a.k6)(()=>[(0,a.bF)(i,{type:"primary",onClick:h},{default:(0,a.k6)(()=>[...r[3]||(r[3]=[(0,a.eW)("去新建",-1)])]),_:1})]),_:1})):((0,a.uX)(),(0,a.CE)("div",c,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(b.value,e=>((0,a.uX)(),(0,a.Wv)(x,{key:e.id,class:"card",shadow:"hover"},{header:(0,a.k6)(()=>[(0,a.Lk)("div",s,[(0,a.Lk)("b",u,(0,a.v_)(e.name),1),(0,a.Lk)("span",p,(0,a.v_)(e.teamName),1)])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",m,(0,a.v_)(e.description||"无描述"),1),(0,a.Lk)("div",f,[(0,a.bF)(i,{size:"small",type:"primary",onClick:t=>{var a;return a=e.id,void n.push({path:"/form-template/edit",query:{id:String(a)}})}},{default:(0,a.k6)(()=>[...r[4]||(r[4]=[(0,a.eW)("编辑",-1)])]),_:1},8,["onClick"]),(0,a.bF)(i,{size:"small",onClick:t=>{var a;return a=e.id,void n.push({path:"/form-template/edit",query:{id:String(a),preview:"true"}})}},{default:(0,a.k6)(()=>[...r[5]||(r[5]=[(0,a.eW)("预览",-1)])]),_:1},8,["onClick"]),(0,a.bF)(g,{title:"确认删除此模板？",onConfirm:n=>k(e.id)},{reference:(0,a.k6)(()=>[(0,a.bF)(i,{size:"small",type:"danger"},{default:(0,a.k6)(()=>[...r[6]||(r[6]=[(0,a.eW)("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])])]),_:2},1024))),128))]))])}}},[["__scopeId","data-v-cec575be"]])}}]);