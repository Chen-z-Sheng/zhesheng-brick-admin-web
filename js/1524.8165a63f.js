"use strict";(self.webpackChunkvue_admin_better=self.webpackChunkvue_admin_better||[]).push([["1524"],{60466:function(e,n,a){a.r(n),a.d(n,{createFormTemplate:function(){return i},deleteFormTemplate:function(){return d},getFormTemplate:function(){return l},getFormTemplates:function(){return r},updateFormTemplate:function(){return o}});var t=a(49289);function r(e={}){return t.default.get("/admin/form-template",{params:e}).then(e=>e.data)}function l(e){return t.default.get(`/admin/form-template/${e}`).then(e=>e.data)}function i(e){return t.default.post("/admin/form-template",e).then(e=>e.data)}function o(e,n){return t.default.patch(`/admin/form-template/${e}`,n).then(e=>e.data)}function d(e){return t.default.delete(`/admin/form-template/${e}`).then(()=>!0)}},51504:function(e,n,a){var t=a(15058),r=a.n(t),l=a(9915),i=a.n(l)()(r());i.push([e.id,"\n.template-list[data-v-e47bf7ae] {\n  padding: 20px;\n  background-color: #fff;\n  min-height: calc(100vh - 120px);\n}\n.toolbar[data-v-e47bf7ae] {\n  display: flex;\n  align-items: center;\n  margin-bottom: 24px;\n  gap: 16px;\n}\n.grow[data-v-e47bf7ae] {\n  flex: 1;\n}\n.grid[data-v-e47bf7ae] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  gap: 24px;\n}\n.card[data-v-e47bf7ae] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  transition: transform 0.2s ease;\n}\n.card[data-v-e47bf7ae]:hover {\n  transform: translateY(-4px);\n}\n.card-hd[data-v-e47bf7ae] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n.name[data-v-e47bf7ae] {\n  font-size: 16px;\n  font-weight: 600;\n  color: #1989fa;\n}\n.team[data-v-e47bf7ae] {\n  font-size: 12px;\n  color: #666;\n  background-color: #f0f2f5;\n  padding: 2px 10px;\n  border-radius: 16px;\n}\n.desc[data-v-e47bf7ae] {\n  margin: 16px 0;\n  color: #666;\n  flex: 1;\n  line-height: 1.6;\n  font-size: 14px;\n}\n.ops[data-v-e47bf7ae] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n  margin-top: 12px;\n}\n",""]),n.A=i},39583:function(e,n,a){a.r(n),a.d(n,{default:function(){return W}});var t=a(79754),r=a(79458),l=a(29986),i=a(60466);let o={class:"template-list"},d={class:"toolbar"},s={key:1,class:"grid"},u={class:"card-hd"},m={class:"name"},p={class:"team"},f={class:"desc"},c={class:"ops"};var v=a(66270),g=a.n(v),b=a(38007),h=a.n(b),k=a(92669),y=a.n(k),x=a(23566),_=a.n(x),w=a(76106),F=a.n(w),C=a(12527),T=a.n(C),A=a(51504),L={};L.styleTagTransform=T(),L.setAttributes=_(),L.insert=y().bind(null,"head"),L.domAPI=h(),L.insertStyleElement=F(),g()(A.A,L),A.A&&A.A.locals&&A.A.locals;var W=(0,a(16784).default)({__name:"form-template",setup(e){let n=(0,r.rd)(),a=(0,t.KR)(""),v=(0,t.KR)([]);async function g(){try{let e=await (0,i.getFormTemplates)();console.log("getFormTemplates =>",e),v.value=Array.isArray(e?.list)?e.list:[]}catch(e){l.n.error("加载模板失败："+(e.message||"服务器异常")),v.value=[]}}(0,t.sV)(g);let b=(0,t.EW)(()=>{let e=a.value.trim().toLowerCase();return e?v.value.filter(n=>[n.name,n.teamName,n.description].some(n=>String(n??"").toLowerCase().includes(e))):v.value});function h(){n.push({path:"/form-template",query:{mode:"new"}})}async function k(e){try{await (0,i.deleteFormTemplate)(e),l.n.success("删除成功！"),g()}catch(e){l.n.error("删除失败："+(e.message||"操作异常"))}}return(e,r)=>{let l=(0,t.g2)("el-input"),i=(0,t.g2)("el-button"),v=(0,t.g2)("el-empty"),g=(0,t.g2)("el-popconfirm"),y=(0,t.g2)("el-card");return(0,t.uX)(),(0,t.CE)("div",o,[(0,t.Lk)("div",d,[(0,t.bF)(l,{modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=e=>a.value=e),placeholder:"搜索模板名称或团队名称",clearable:"",class:"w-64"},null,8,["modelValue"]),r[2]||(r[2]=(0,t.Lk)("div",{class:"grow"},null,-1)),(0,t.bF)(i,{type:"primary",onClick:h},{default:(0,t.k6)(()=>[...r[1]||(r[1]=[(0,t.eW)("新建模板",-1)])]),_:1})]),0===b.value.length?((0,t.uX)(),(0,t.Wv)(v,{key:0,description:"暂无模板"},{extra:(0,t.k6)(()=>[(0,t.bF)(i,{type:"primary",onClick:h},{default:(0,t.k6)(()=>[...r[3]||(r[3]=[(0,t.eW)("去新建",-1)])]),_:1})]),_:1})):((0,t.uX)(),(0,t.CE)("div",s,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(b.value,e=>((0,t.uX)(),(0,t.Wv)(y,{key:e.id,class:"card",shadow:"hover"},{header:(0,t.k6)(()=>[(0,t.Lk)("div",u,[(0,t.Lk)("b",m,(0,t.v_)(e.name),1),(0,t.Lk)("span",p,(0,t.v_)(e.teamName),1)])]),default:(0,t.k6)(()=>[(0,t.Lk)("div",f,(0,t.v_)(e.description||"无描述"),1),(0,t.Lk)("div",c,[(0,t.bF)(i,{size:"small",type:"primary",onClick:a=>{var t;return t=e.id,void n.push({path:"/form-template",query:{id:String(t)}})}},{default:(0,t.k6)(()=>[...r[4]||(r[4]=[(0,t.eW)("编辑",-1)])]),_:1},8,["onClick"]),(0,t.bF)(i,{size:"small",onClick:a=>{var t;return t=e.id,void n.push({path:"/form-template",query:{id:String(t),preview:"true"}})}},{default:(0,t.k6)(()=>[...r[5]||(r[5]=[(0,t.eW)("预览",-1)])]),_:1},8,["onClick"]),(0,t.bF)(g,{title:"确认删除此模板？",onConfirm:n=>k(e.id)},{reference:(0,t.k6)(()=>[(0,t.bF)(i,{size:"small",type:"danger"},{default:(0,t.k6)(()=>[...r[6]||(r[6]=[(0,t.eW)("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])])]),_:2},1024))),128))]))])}}},[["__scopeId","data-v-e47bf7ae"]])}}]);