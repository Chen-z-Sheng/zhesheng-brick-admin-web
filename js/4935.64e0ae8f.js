"use strict";(self.webpackChunkvue_admin_better=self.webpackChunkvue_admin_better||[]).push([["4935"],{83e3:function(e,t,a){var r=a(5563),i=a.n(r),o=a(47444),d=a.n(o)()(i());d.push([e.id,".order-container[data-v-432bc3bb]{padding:20px}.order-container .card-header[data-v-432bc3bb]{display:flex;justify-content:space-between;align-items:center;font-weight:bold}.order-container .order-product[data-v-432bc3bb]{display:flex;align-items:center;margin-bottom:10px}.order-container .order-product[data-v-432bc3bb]:last-child{margin-bottom:0}.order-container .order-product .product-info .product-meta[data-v-432bc3bb]{font-size:12px;color:#999;margin-top:3px}.order-container .order-amount[data-v-432bc3bb]{text-align:center;padding:20px;background-color:#f5f7fa;border-radius:4px}.order-container .order-amount .amount-label[data-v-432bc3bb]{font-size:14px;color:#666;margin-bottom:10px}.order-container .order-amount .amount-value[data-v-432bc3bb]{font-size:24px;font-weight:bold;color:#fa541c}.order-container .product-cell[data-v-432bc3bb]{display:flex;align-items:center}.order-container .product-cell .product-spec[data-v-432bc3bb]{font-size:12px;color:#999;margin-top:3px}.order-container .pagination-container[data-v-432bc3bb]{margin-top:20px;text-align:right}",""]),t.A=d},38090:function(e,t,a){a.r(t),a.d(t,{default:function(){return D}});var r=a(7174);let i={class:"order-container"},o={class:"card-header"},d={class:"header-actions"},l={class:"product-info"},n={class:"product-meta"},c={class:"pagination-container"},s={class:"order-amount"},p={class:"amount-value"},u={class:"product-cell"},m={class:"product-spec"},h={class:"dialog-footer"};var g={name:"Order",components:{Search:a(5059).Search},data:()=>({searchText:"",filterStatus:"",currentPage:1,pageSize:10,totalOrders:0,loading:!1,detailDialogVisible:!1,orders:[{id:"SO202305001",customer:"张三",phone:"13800138001",address:"北京市朝阳区某某大厦101室",totalAmount:15998,status:"shipped",createTime:"2023-05-01 14:30:00",payTime:"2023-05-01 14:35:00",shipTime:"2023-05-02 09:15:00",products:[{id:1,name:"iPhone 14 Pro",spec:"128GB 深空黑",price:7999,quantity:2,subtotal:15998,image:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}]},{id:"SO202305002",customer:"李四",phone:"13800138002",address:"上海市浦东新区某某路1001号",totalAmount:7999,status:"paid",createTime:"2023-05-03 10:15:00",payTime:"2023-05-03 10:20:00",products:[{id:1,name:"iPhone 14 Pro",spec:"128GB 银色",price:7999,quantity:1,subtotal:7999,image:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}]},{id:"SO202305003",customer:"王五",phone:"13800138003",address:"广州市天河区某某广场201室",totalAmount:2999,status:"pending",createTime:"2023-05-05 16:45:00",products:[{id:5,name:"Apple Watch Series 8",spec:"45mm GPS版",price:2999,quantity:1,subtotal:2999,image:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}]},{id:"SO202304015",customer:"赵六",phone:"13800138004",address:"深圳市南山区科技园南路1001号",totalAmount:1899,status:"completed",createTime:"2023-04-15 10:15:00",payTime:"2023-04-15 10:20:00",shipTime:"2023-04-16 14:30:00",completeTime:"2023-04-20 16:45:00",products:[{id:3,name:"AirPods Pro",spec:"第二代",price:1899,quantity:1,subtotal:1899,image:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}]},{id:"SO202304010",customer:"孙七",phone:"13800138005",address:"杭州市西湖区某某路501室",totalAmount:4399,status:"cancelled",createTime:"2023-04-10 09:30:00",cancelTime:"2023-04-10 10:15:00",products:[{id:4,name:"iPad Air",spec:"64GB 深空灰",price:4399,quantity:1,subtotal:4399,image:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}]}],detailOrder:{}}),computed:{filteredOrders(){let e=this.orders;this.searchText&&(e=e.filter(e=>e.id.toLowerCase().includes(this.searchText.toLowerCase())||e.customer.toLowerCase().includes(this.searchText.toLowerCase()))),this.filterStatus&&(e=e.filter(e=>e.status===this.filterStatus));let t=(this.currentPage-1)*this.pageSize,a=t+this.pageSize;return e.slice(t,a)}},methods:{handleSizeChange(e){this.pageSize=e,this.currentPage=1},handleCurrentChange(e){this.currentPage=e},getStatusText:e=>({pending:"待付款",paid:"待发货",shipped:"已发货",completed:"已完成",cancelled:"已取消"})[e]||e,getStatusType:e=>({pending:"info",paid:"warning",shipped:"",completed:"success",cancelled:"danger"})[e]||"info",getLogisticsStep:e=>({pending:0,paid:1,shipped:2,completed:3,cancelled:0})[e]||0,viewOrder(e){this.detailOrder={...e},this.detailDialogVisible=!0},shipOrder(e){this.$confirm(`确定要为订单${e.id}发货吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let t=this.orders.findIndex(t=>t.id===e.id);-1!==t&&(this.orders[t].status="shipped",this.orders[t].shipTime=new Date().toLocaleString(),this.$message.success("订单已发货"),this.detailOrder.id===e.id&&(this.detailOrder.status="shipped",this.detailOrder.shipTime=this.orders[t].shipTime))}).catch(()=>{this.$message.info("已取消操作")})},cancelOrder(e){this.$confirm(`确定要取消订单${e.id}吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let t=this.orders.findIndex(t=>t.id===e.id);-1!==t&&(this.orders[t].status="cancelled",this.orders[t].cancelTime=new Date().toLocaleString(),this.$message.success("订单已取消"),this.detailOrder.id===e.id&&(this.detailOrder.status="cancelled",this.detailOrder.cancelTime=this.orders[t].cancelTime))}).catch(()=>{this.$message.info("已取消操作")})},exportOrders(){this.$message.success("订单导出成功")}}},x=a(7368),V=a.n(x),f=a(60473),b=a.n(f),C=a(62915),N=a.n(C),w=a(14808),v=a.n(w),y=a(85364),T=a.n(y),S=a(78577),O=a.n(S),_=a(83e3),k={};k.styleTagTransform=O(),k.setAttributes=v(),k.insert=N().bind(null,"head"),k.domAPI=b(),k.insertStyleElement=T(),V()(_.A,k),_.A&&_.A.locals&&_.A.locals;var D=(0,a(92260).default)(g,[["render",function(e,t,a,g,x,V){let f=(0,r.resolveComponent)("Search"),b=(0,r.resolveComponent)("el-icon"),C=(0,r.resolveComponent)("el-input"),N=(0,r.resolveComponent)("el-option"),w=(0,r.resolveComponent)("el-select"),v=(0,r.resolveComponent)("el-button"),y=(0,r.resolveComponent)("el-table-column"),T=(0,r.resolveComponent)("el-image"),S=(0,r.resolveComponent)("el-tag"),O=(0,r.resolveComponent)("el-table"),_=(0,r.resolveComponent)("el-pagination"),k=(0,r.resolveComponent)("el-card"),D=(0,r.resolveComponent)("el-descriptions-item"),B=(0,r.resolveComponent)("el-descriptions"),E=(0,r.resolveComponent)("el-col"),z=(0,r.resolveComponent)("el-row"),A=(0,r.resolveComponent)("el-divider"),P=(0,r.resolveComponent)("el-step"),j=(0,r.resolveComponent)("el-steps"),L=(0,r.resolveComponent)("el-dialog"),$=(0,r.resolveDirective)("loading");return(0,r.openBlock)(),(0,r.createElementBlock)("div",i,[(0,r.createVNode)(k,{shadow:"never"},{header:(0,r.withCtx)(()=>[(0,r.createElementVNode)("div",o,[t[8]||(t[8]=(0,r.createElementVNode)("span",null,"订单管理",-1)),(0,r.createElementVNode)("div",d,[(0,r.createVNode)(C,{modelValue:x.searchText,"onUpdate:modelValue":t[0]||(t[0]=e=>x.searchText=e),placeholder:"搜索订单...",clearable:"",style:{width:"200px","margin-right":"10px"}},{prefix:(0,r.withCtx)(()=>[(0,r.createVNode)(b,null,{default:(0,r.withCtx)(()=>[(0,r.createVNode)(f)]),_:1})]),_:1},8,["modelValue"]),(0,r.createVNode)(w,{modelValue:x.filterStatus,"onUpdate:modelValue":t[1]||(t[1]=e=>x.filterStatus=e),placeholder:"状态筛选",style:{width:"120px","margin-right":"10px"}},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(N,{label:"全部",value:""}),(0,r.createVNode)(N,{label:"待付款",value:"pending"}),(0,r.createVNode)(N,{label:"待发货",value:"paid"}),(0,r.createVNode)(N,{label:"已发货",value:"shipped"}),(0,r.createVNode)(N,{label:"已完成",value:"completed"}),(0,r.createVNode)(N,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"]),(0,r.createVNode)(v,{type:"primary",onClick:V.exportOrders},{default:(0,r.withCtx)(()=>[...t[7]||(t[7]=[(0,r.createTextVNode)("导出订单",-1)])]),_:1},8,["onClick"])])])]),default:(0,r.withCtx)(()=>[(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createBlock)(O,{data:V.filteredOrders,style:{width:"100%"},"row-key":"id"},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(y,{prop:"id",label:"订单号",width:"180"}),(0,r.createVNode)(y,{prop:"customer",label:"客户",width:"120"}),(0,r.createVNode)(y,{prop:"products",label:"商品","min-width":"250"},{default:(0,r.withCtx)(({row:e})=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.products,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.id,class:"order-product"},[(0,r.createVNode)(T,{src:e.image,fit:"cover",style:{width:"40px",height:"40px","border-radius":"4px","margin-right":"10px"}},null,8,["src"]),(0,r.createElementVNode)("div",l,[(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(e.name),1),(0,r.createElementVNode)("div",n,[(0,r.createElementVNode)("span",null,"\xa5"+(0,r.toDisplayString)(e.price)+" \xd7 "+(0,r.toDisplayString)(e.quantity),1)])])]))),128))]),_:1}),(0,r.createVNode)(y,{prop:"totalAmount",label:"订单金额",width:"120"},{default:(0,r.withCtx)(({row:e})=>[(0,r.createTextVNode)(" \xa5"+(0,r.toDisplayString)(e.totalAmount.toLocaleString()),1)]),_:1}),(0,r.createVNode)(y,{label:"状态",width:"100"},{default:(0,r.withCtx)(({row:e})=>[(0,r.createVNode)(S,{type:V.getStatusType(e.status)},{default:(0,r.withCtx)(()=>[(0,r.createTextVNode)((0,r.toDisplayString)(V.getStatusText(e.status)),1)]),_:2},1032,["type"])]),_:1}),(0,r.createVNode)(y,{prop:"createTime",label:"下单时间",width:"180"}),(0,r.createVNode)(y,{label:"操作",width:"200"},{default:(0,r.withCtx)(({row:e})=>[(0,r.createVNode)(v,{type:"text",onClick:t=>V.viewOrder(e)},{default:(0,r.withCtx)(()=>[...t[9]||(t[9]=[(0,r.createTextVNode)("查看",-1)])]),_:1},8,["onClick"]),"paid"===e.status?((0,r.openBlock)(),(0,r.createBlock)(v,{key:0,type:"text",onClick:t=>V.shipOrder(e)},{default:(0,r.withCtx)(()=>[...t[10]||(t[10]=[(0,r.createTextVNode)(" 发货 ",-1)])]),_:1},8,["onClick"])):(0,r.createCommentVNode)("v-if",!0),"pending"===e.status?((0,r.openBlock)(),(0,r.createBlock)(v,{key:1,type:"text",onClick:t=>V.cancelOrder(e)},{default:(0,r.withCtx)(()=>[...t[11]||(t[11]=[(0,r.createTextVNode)(" 取消 ",-1)])]),_:1},8,["onClick"])):(0,r.createCommentVNode)("v-if",!0)]),_:1})]),_:1},8,["data"])),[[$,x.loading]]),(0,r.createElementVNode)("div",c,[(0,r.createVNode)(_,{"current-page":x.currentPage,"onUpdate:currentPage":t[2]||(t[2]=e=>x.currentPage=e),"page-size":x.pageSize,"onUpdate:pageSize":t[3]||(t[3]=e=>x.pageSize=e),"page-sizes":[10,20,50,100],total:x.totalOrders,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:V.handleSizeChange,onCurrentChange:V.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),(0,r.createCommentVNode)(" 订单详情对话框 "),(0,r.createVNode)(L,{modelValue:x.detailDialogVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>x.detailDialogVisible=e),title:"订单详情",width:"800px"},{footer:(0,r.withCtx)(()=>[(0,r.createElementVNode)("span",h,[(0,r.createVNode)(v,{onClick:t[4]||(t[4]=e=>x.detailDialogVisible=!1)},{default:(0,r.withCtx)(()=>[...t[15]||(t[15]=[(0,r.createTextVNode)("关闭",-1)])]),_:1}),"paid"===x.detailOrder.status?((0,r.openBlock)(),(0,r.createBlock)(v,{key:0,type:"primary",onClick:t[5]||(t[5]=e=>V.shipOrder(x.detailOrder))},{default:(0,r.withCtx)(()=>[...t[16]||(t[16]=[(0,r.createTextVNode)(" 立即发货 ",-1)])]),_:1})):(0,r.createCommentVNode)("v-if",!0)])]),default:(0,r.withCtx)(()=>[(0,r.createVNode)(z,{gutter:20},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(E,{span:16},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(B,{column:1,border:""},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(D,{label:"订单号"},{default:(0,r.withCtx)(()=>[(0,r.createTextVNode)((0,r.toDisplayString)(x.detailOrder.id),1)]),_:1}),(0,r.createVNode)(D,{label:"客户"},{default:(0,r.withCtx)(()=>[(0,r.createTextVNode)((0,r.toDisplayString)(x.detailOrder.customer),1)]),_:1}),(0,r.createVNode)(D,{label:"联系电话"},{default:(0,r.withCtx)(()=>[(0,r.createTextVNode)((0,r.toDisplayString)(x.detailOrder.phone),1)]),_:1}),(0,r.createVNode)(D,{label:"收货地址"},{default:(0,r.withCtx)(()=>[(0,r.createTextVNode)((0,r.toDisplayString)(x.detailOrder.address),1)]),_:1}),(0,r.createVNode)(D,{label:"订单状态"},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(S,{type:V.getStatusType(x.detailOrder.status)},{default:(0,r.withCtx)(()=>[(0,r.createTextVNode)((0,r.toDisplayString)(V.getStatusText(x.detailOrder.status)),1)]),_:1},8,["type"])]),_:1}),(0,r.createVNode)(D,{label:"下单时间"},{default:(0,r.withCtx)(()=>[(0,r.createTextVNode)((0,r.toDisplayString)(x.detailOrder.createTime),1)]),_:1}),(0,r.createVNode)(D,{label:"支付时间"},{default:(0,r.withCtx)(()=>[(0,r.createTextVNode)((0,r.toDisplayString)(x.detailOrder.payTime),1)]),_:1}),(0,r.createVNode)(D,{label:"发货时间"},{default:(0,r.withCtx)(()=>[(0,r.createTextVNode)((0,r.toDisplayString)(x.detailOrder.shipTime),1)]),_:1})]),_:1})]),_:1}),(0,r.createVNode)(E,{span:8},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("div",s,[t[12]||(t[12]=(0,r.createElementVNode)("div",{class:"amount-label"},"订单总额",-1)),(0,r.createElementVNode)("div",p,"\xa5"+(0,r.toDisplayString)(x.detailOrder.totalAmount?.toLocaleString()),1)])]),_:1})]),_:1}),(0,r.createVNode)(A,null,{default:(0,r.withCtx)(()=>[...t[13]||(t[13]=[(0,r.createTextVNode)("商品信息",-1)])]),_:1}),(0,r.createVNode)(O,{data:x.detailOrder.products,style:{width:"100%"}},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(y,{label:"商品","min-width":"200"},{default:(0,r.withCtx)(({row:e})=>[(0,r.createElementVNode)("div",u,[(0,r.createVNode)(T,{src:e.image,fit:"cover",style:{width:"60px",height:"60px","border-radius":"4px","margin-right":"10px"}},null,8,["src"]),(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(e.name),1),(0,r.createElementVNode)("div",m,(0,r.toDisplayString)(e.spec),1)])])]),_:1}),(0,r.createVNode)(y,{prop:"price",label:"单价",width:"100"},{default:(0,r.withCtx)(({row:e})=>[(0,r.createTextVNode)(" \xa5"+(0,r.toDisplayString)(e.price),1)]),_:1}),(0,r.createVNode)(y,{prop:"quantity",label:"数量",width:"80"}),(0,r.createVNode)(y,{prop:"subtotal",label:"小计",width:"100"},{default:(0,r.withCtx)(({row:e})=>[(0,r.createTextVNode)(" \xa5"+(0,r.toDisplayString)(e.subtotal),1)]),_:1})]),_:1},8,["data"]),(0,r.createVNode)(A,null,{default:(0,r.withCtx)(()=>[...t[14]||(t[14]=[(0,r.createTextVNode)("物流信息",-1)])]),_:1}),(0,r.createVNode)(j,{active:V.getLogisticsStep(x.detailOrder.status),"finish-status":"success",simple:""},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(P,{title:"已下单",description:x.detailOrder.createTime},null,8,["description"]),(0,r.createVNode)(P,{title:"已付款",description:x.detailOrder.payTime},null,8,["description"]),(0,r.createVNode)(P,{title:"已发货",description:x.detailOrder.shipTime},null,8,["description"]),(0,r.createVNode)(P,{title:"已完成"})]),_:1},8,["active"])]),_:1},8,["modelValue"])])}],["__scopeId","data-v-432bc3bb"]])}}]);