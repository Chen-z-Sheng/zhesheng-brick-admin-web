"use strict";(self.webpackChunkvue_admin_better=self.webpackChunkvue_admin_better||[]).push([["6666"],{18665:function(e,t,i){var a=i(5563),o=i.n(a),n=i(47444),l=i.n(n)()(o());l.push([e.id,".notification-container[data-v-371021fa]{padding:20px}.notification-container .card-header[data-v-371021fa]{font-weight:bold}.notification-container .notification-content[data-v-371021fa]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis}.notification-container .pagination-container[data-v-371021fa]{margin-top:20px;text-align:right}",""]),t.A=l},85089:function(e,t,i){i.r(t),i.d(t,{default:function(){return y}});var a=i(7174);let o={class:"notification-container"},n={class:"card-header"},l={key:1},r={class:"notification-content"},d={class:"notification-content"},c={class:"notification-content"},s={class:"pagination-container"},h={class:"dialog-footer"};var p=i(7368),f=i.n(p),u=i(60473),m=i.n(u),g=i(62915),C=i.n(g),V=i(14808),N=i.n(V),w=i(85364),x=i.n(w),b=i(78577),v=i.n(b),k=i(18665),_={};_.styleTagTransform=v(),_.setAttributes=N(),_.insert=C().bind(null,"head"),_.domAPI=m(),_.insertStyleElement=x(),f()(k.A,_),k.A&&k.A.locals&&k.A.locals;var y=(0,i(92260).default)({name:"Notification",data:()=>({activeTab:"all",currentPage:1,pageSize:10,totalNotifications:0,loading:!1,sending:!1,dialogVisible:!1,notifications:[{id:1,title:"系统维护通知",content:"系统将于今晚00:00-02:00进行例行维护，请提前做好相关准备。",sender:"系统管理员",date:"2023-05-15 14:30",read:!1,priority:3},{id:2,title:"新功能上线",content:"我们新增了数据可视化功能，欢迎体验使用。",sender:"产品团队",date:"2023-05-14 09:15",read:!0,priority:1},{id:3,title:"安全更新提醒",content:"检测到您的密码强度较弱，请及时修改以确保账户安全。",sender:"安全团队",date:"2023-05-12 16:45",read:!1,priority:2},{id:4,title:"会议通知",content:"本周五下午3点将召开全体成员会议，请准时参加。",sender:"人事部",date:"2023-05-10 11:20",read:!0,priority:2},{id:5,title:"系统升级完成",content:"系统v2.0版本已升级完成，新增多项功能和优化。",sender:"技术部",date:"2023-05-08 18:00",read:!0,priority:1}],notificationForm:{title:"",content:"",recipients:[],priority:1},notificationRules:{title:[{required:!0,message:"请输入通知标题",trigger:"blur"}],content:[{required:!0,message:"请输入通知内容",trigger:"blur"}],recipients:[{required:!0,message:"请选择接收者",trigger:"change"}]},users:[{id:1,name:"张三"},{id:2,name:"李四"},{id:3,name:"王五"},{id:4,name:"赵六"},{id:5,name:"钱七"}]}),computed:{filteredNotifications(){let e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.notifications.slice(e,t)},unreadNotifications(){return this.notifications.filter(e=>!e.read)},readNotifications(){return this.notifications.filter(e=>e.read)}},methods:{handleTabChange(e){this.activeTab=e,this.currentPage=1},handleSizeChange(e){this.pageSize=e,this.currentPage=1},handleCurrentChange(e){this.currentPage=e},markAsRead(e){let t=this.notifications.findIndex(t=>t.id===e.id);-1!==t&&(this.notifications[t].read=!0,this.$message.success("已标记为已读"))},deleteNotification(e){this.$confirm(`确定要删除通知"${e.title}"吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let t=this.notifications.findIndex(t=>t.id===e.id);-1!==t&&(this.notifications.splice(t,1),this.totalNotifications=this.notifications.length,this.$message.success("删除成功"))}).catch(()=>{this.$message.info("已取消删除")})},showCreateDialog(){this.dialogVisible=!0,this.$nextTick(()=>{this.$refs.notificationFormRef.resetFields()})},sendNotification(){this.$refs.notificationFormRef.validate(e=>{e&&(this.sending=!0,setTimeout(()=>{let e={id:this.notifications.length+1,...this.notificationForm,sender:"当前用户",date:new Date().toLocaleString(),read:!1};this.notifications.unshift(e),this.totalNotifications=this.notifications.length,this.dialogVisible=!1,this.sending=!1,this.$message.success("通知发送成功")},1e3))})},refreshNotifications(){this.loading=!0,setTimeout(()=>{this.loading=!1,this.$message.success("刷新成功")},500)}}},[["render",function(e,t,i,p,f,u){let m=(0,a.resolveComponent)("el-button"),g=(0,a.resolveComponent)("el-badge"),C=(0,a.resolveComponent)("el-table-column"),V=(0,a.resolveComponent)("el-table"),N=(0,a.resolveComponent)("el-tab-pane"),w=(0,a.resolveComponent)("el-tabs"),x=(0,a.resolveComponent)("el-pagination"),b=(0,a.resolveComponent)("el-card"),v=(0,a.resolveComponent)("el-input"),k=(0,a.resolveComponent)("el-form-item"),_=(0,a.resolveComponent)("el-option"),y=(0,a.resolveComponent)("el-select"),T=(0,a.resolveComponent)("el-radio"),z=(0,a.resolveComponent)("el-radio-group"),B=(0,a.resolveComponent)("el-form"),S=(0,a.resolveComponent)("el-dialog"),F=(0,a.resolveDirective)("loading");return(0,a.openBlock)(),(0,a.createElementBlock)("div",o,[(0,a.createVNode)(b,{shadow:"never"},{header:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",n,[t[11]||(t[11]=(0,a.createElementVNode)("span",null,"通知中心",-1)),(0,a.createVNode)(m,{type:"primary",onClick:u.showCreateDialog,style:{float:"right","margin-left":"10px"}},{default:(0,a.withCtx)(()=>[...t[9]||(t[9]=[(0,a.createTextVNode)(" 发送通知 ",-1)])]),_:1},8,["onClick"]),(0,a.createVNode)(m,{onClick:u.refreshNotifications,style:{float:"right"}},{default:(0,a.withCtx)(()=>[...t[10]||(t[10]=[(0,a.createTextVNode)(" 刷新 ",-1)])]),_:1},8,["onClick"])])]),default:(0,a.withCtx)(()=>[(0,a.createVNode)(w,{modelValue:f.activeTab,"onUpdate:modelValue":t[0]||(t[0]=e=>f.activeTab=e),onTabChange:u.handleTabChange},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(N,{label:"全部通知",name:"all"},{default:(0,a.withCtx)(()=>[(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)(V,{data:u.filteredNotifications,style:{width:"100%"}},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(C,{prop:"title",label:"标题",width:"200"},{default:(0,a.withCtx)(({row:e})=>[e.read?((0,a.openBlock)(),(0,a.createElementBlock)("span",l,(0,a.toDisplayString)(e.title),1)):((0,a.openBlock)(),(0,a.createBlock)(g,{key:0,"is-dot":"",class:"item"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.title),1)]),_:2},1024))]),_:1}),(0,a.createVNode)(C,{prop:"content",label:"内容"},{default:(0,a.withCtx)(({row:e})=>[(0,a.createElementVNode)("div",r,(0,a.toDisplayString)(e.content),1)]),_:1}),(0,a.createVNode)(C,{prop:"sender",label:"发送者",width:"120"}),(0,a.createVNode)(C,{prop:"date",label:"时间",width:"180"}),(0,a.createVNode)(C,{label:"操作",width:"200"},{default:(0,a.withCtx)(({row:e})=>[e.read?(0,a.createCommentVNode)("v-if",!0):((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,type:"primary",size:"small",onClick:t=>u.markAsRead(e)},{default:(0,a.withCtx)(()=>[...t[12]||(t[12]=[(0,a.createTextVNode)(" 标为已读 ",-1)])]),_:1},8,["onClick"])),(0,a.createVNode)(m,{type:"danger",size:"small",onClick:t=>u.deleteNotification(e)},{default:(0,a.withCtx)(()=>[...t[13]||(t[13]=[(0,a.createTextVNode)(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[F,f.loading]])]),_:1}),(0,a.createVNode)(N,{label:"未读通知",name:"unread"},{default:(0,a.withCtx)(()=>[(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)(V,{data:u.unreadNotifications,style:{width:"100%"}},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(C,{prop:"title",label:"标题",width:"200"},{default:(0,a.withCtx)(({row:e})=>[(0,a.createVNode)(g,{"is-dot":"",class:"item"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.title),1)]),_:2},1024)]),_:1}),(0,a.createVNode)(C,{prop:"content",label:"内容"},{default:(0,a.withCtx)(({row:e})=>[(0,a.createElementVNode)("div",d,(0,a.toDisplayString)(e.content),1)]),_:1}),(0,a.createVNode)(C,{prop:"sender",label:"发送者",width:"120"}),(0,a.createVNode)(C,{prop:"date",label:"时间",width:"180"}),(0,a.createVNode)(C,{label:"操作",width:"200"},{default:(0,a.withCtx)(({row:e})=>[(0,a.createVNode)(m,{type:"primary",size:"small",onClick:t=>u.markAsRead(e)},{default:(0,a.withCtx)(()=>[...t[14]||(t[14]=[(0,a.createTextVNode)(" 标为已读 ",-1)])]),_:1},8,["onClick"]),(0,a.createVNode)(m,{type:"danger",size:"small",onClick:t=>u.deleteNotification(e)},{default:(0,a.withCtx)(()=>[...t[15]||(t[15]=[(0,a.createTextVNode)(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[F,f.loading]])]),_:1}),(0,a.createVNode)(N,{label:"已读通知",name:"read"},{default:(0,a.withCtx)(()=>[(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)(V,{data:u.readNotifications,style:{width:"100%"}},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(C,{prop:"title",label:"标题",width:"200"}),(0,a.createVNode)(C,{prop:"content",label:"内容"},{default:(0,a.withCtx)(({row:e})=>[(0,a.createElementVNode)("div",c,(0,a.toDisplayString)(e.content),1)]),_:1}),(0,a.createVNode)(C,{prop:"sender",label:"发送者",width:"120"}),(0,a.createVNode)(C,{prop:"date",label:"时间",width:"180"}),(0,a.createVNode)(C,{label:"操作",width:"120"},{default:(0,a.withCtx)(({row:e})=>[(0,a.createVNode)(m,{type:"danger",size:"small",onClick:t=>u.deleteNotification(e)},{default:(0,a.withCtx)(()=>[...t[16]||(t[16]=[(0,a.createTextVNode)(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[F,f.loading]])]),_:1})]),_:1},8,["modelValue","onTabChange"]),(0,a.createElementVNode)("div",s,[(0,a.createVNode)(x,{"current-page":f.currentPage,"onUpdate:currentPage":t[1]||(t[1]=e=>f.currentPage=e),"page-size":f.pageSize,"onUpdate:pageSize":t[2]||(t[2]=e=>f.pageSize=e),"page-sizes":[10,20,50,100],total:f.totalNotifications,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:u.handleSizeChange,onCurrentChange:u.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),(0,a.createCommentVNode)(" 发送通知对话框 "),(0,a.createVNode)(S,{modelValue:f.dialogVisible,"onUpdate:modelValue":t[8]||(t[8]=e=>f.dialogVisible=e),title:"发送通知",width:"600px"},{footer:(0,a.withCtx)(()=>[(0,a.createElementVNode)("span",h,[(0,a.createVNode)(m,{onClick:t[7]||(t[7]=e=>f.dialogVisible=!1)},{default:(0,a.withCtx)(()=>[...t[20]||(t[20]=[(0,a.createTextVNode)("取消",-1)])]),_:1}),(0,a.createVNode)(m,{type:"primary",onClick:u.sendNotification,loading:f.sending},{default:(0,a.withCtx)(()=>[...t[21]||(t[21]=[(0,a.createTextVNode)(" 发送 ",-1)])]),_:1},8,["onClick","loading"])])]),default:(0,a.withCtx)(()=>[(0,a.createVNode)(B,{ref:"notificationFormRef",model:f.notificationForm,rules:f.notificationRules,"label-width":"80px"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(k,{label:"标题",prop:"title"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v,{modelValue:f.notificationForm.title,"onUpdate:modelValue":t[3]||(t[3]=e=>f.notificationForm.title=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(k,{label:"内容",prop:"content"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v,{modelValue:f.notificationForm.content,"onUpdate:modelValue":t[4]||(t[4]=e=>f.notificationForm.content=e),type:"textarea",rows:4},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(k,{label:"接收者",prop:"recipients"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(y,{modelValue:f.notificationForm.recipients,"onUpdate:modelValue":t[5]||(t[5]=e=>f.notificationForm.recipients=e),multiple:"",placeholder:"请选择接收者",style:{width:"100%"}},{default:(0,a.withCtx)(()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(f.users,e=>((0,a.openBlock)(),(0,a.createBlock)(_,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,a.createVNode)(k,{label:"紧急程度"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(z,{modelValue:f.notificationForm.priority,"onUpdate:modelValue":t[6]||(t[6]=e=>f.notificationForm.priority=e)},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(T,{label:1},{default:(0,a.withCtx)(()=>[...t[17]||(t[17]=[(0,a.createTextVNode)("普通",-1)])]),_:1}),(0,a.createVNode)(T,{label:2},{default:(0,a.withCtx)(()=>[...t[18]||(t[18]=[(0,a.createTextVNode)("重要",-1)])]),_:1}),(0,a.createVNode)(T,{label:3},{default:(0,a.withCtx)(()=>[...t[19]||(t[19]=[(0,a.createTextVNode)("紧急",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}],["__scopeId","data-v-371021fa"]])}}]);